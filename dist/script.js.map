{"version":3,"sources":["source/scripts/collections/customers.js","source/scripts/collections/orders.js","source/scripts/collections/sessions.js","source/scripts/collections/templates.js","source/scripts/collections/users.js","source/scripts/components/labels.js","source/scripts/components/prefill.js","source/scripts/listeners.js","source/scripts/polyfill.js","source/scripts/root.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["customers","module","exports","memory","add","element","root","send","request","save_search","localStorage","setItem","value","updated","edit","options","key","dataset","customer","v","property","callback","list","innerHTML","labels","loading","requestAnimationFrame","search","String","getItem","toLowerCase","render","keys","iteration","Math","floor","random","Object","length","children","no_results","title","shift","archived","name","indexOf","elem","document","createElement","load","appendChild","archive","render_one","address","querySelector","focus","format","date","Date","months","getDate","getMonth","getFullYear","getHours","getMinutes","updater","setTimeout","me","launched","tmp","orders","ws","JSON","stringify","order","save_date","data","parentElement","edit_date","clicked","toJSON","toggle_status","index","tasks","status","toggle_task","users","user","reduce","html","task","arrival","departure","cargo","contents","extra","repeat","parseInt","slice","i","main","sign_in","email","password","sign_out","check_passwords","inputs","querySelectorAll","sessions","launch","alert","old_password","res","load_page","page","history","state","body","classList","forEach","c","remove","prevent_url","url","window","scrollTo","defaulted","operation","replace","decode","location","pathname","encode","parts","split","change_language","language","reload","highlight_lang","contains","format_date","format_time","start","console","log","hide_notification","load_permissions","render_tasks","memo","load_permission","input","id","add_permission","archive_permission","setAttribute","update_permission","checked","map","pop","update_task","users_admin","update","push","toUpperCase","selectionStart","selectionEnd","save_email","load_email","role","LANGS","landing","about","courses","profile","invitations","stats","placeholder_search","placeholder","permissions","configure_ipad","save","n","hasOwnProperty","label","el","prefill","collection","item","property_key","property_collection","select","input_collection","submit","selection","ul","loop","updates","init","bind","documentElement","addEventListener","listener","e","target","type","preventDefault","error","elements","splice","call","bind_one","MutationObserver","observer","observe","attributes","subtree","childList","characterData","mutations","attributeName","d","config","join","prop","text","bg","obj","escape","style","backgroundImage","load_file","substring","str","xhr","XMLHttpRequest","open","onreadystatechange","readyState","templates","responseText","match","assign","defineProperty","enumerable","configurable","writable","undefined","TypeError","to","arguments","nextSource","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","Element","prototype","Array","DOMTokenList","classes","className","token","toString","toggle","defineElementGetter","getter","get","__defineGetter__","require","DEV_MODE","incoming","create_websocket","session","query","pair","p","callbacks","encodeURIComponent","WebSocket","Send","parse","removeEventListener","message","cb","m","merge","notify","redirect","href","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","round","now","browser","navigator","userAgent","forceRepaint","reloaders","stylesheet","filter","link","val","getAttribute","offsetHeight","javascript","scripts","textScripts","script","srcScripts","src","loaded","all","onLoad","eval","newScript","async","onload","head","port","host","server","hostname","connect","connection","onmessage","event","reloader","onerror","close","onclose"],"mappings":"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","file":"dist/script.js","sourcesContent":["let customers = module.exports = {\r\n\r\n  memory: {},\r\n\r\n  add: (element) => {\r\n\r\n    root.send({ request: 'new_customer' });\r\n\r\n  },\r\n  \r\n  save_search: (element) => {\r\n\r\n\tlocalStorage.setItem('search', element.value);\r\n\r\n\tcustomers.updated = true;\r\n\r\n  },\r\n\r\n  edit: (element, options) => {\r\n\r\n    let request = {\r\n       request: 'edit',\r\n       key: element.dataset.customer\r\n     };\r\n\r\n     let v = options ? options.value : element.value;\r\n\r\n     request[element.dataset.property] = v;\r\n\r\n     root.send(request, options ? options.callback : null);\r\n\r\n  },\r\n\r\n  list: (element) => {\r\n\r\n    if(!element) return;\r\n\r\n    element.innerHTML = ``;\r\n\r\n    root.labels.loading(element);\r\n\r\n    requestAnimationFrame(()=> {\r\n\r\n      let search = String(localStorage.getItem('search') || '').toLowerCase();\r\n\r\n      customers.render(element, search);\r\n\r\n    });\r\n\r\n  },\r\n\r\n\r\n  render: (element, search, keys, iteration) => {\r\n\r\n    if(!element) return;\r\n\r\n    if(!iteration) iteration = element.dataset.iteration = 'i' + Math.floor(Math.random() * 1000);\r\n\r\n    if(element.dataset.iteration != iteration) return;\r\n\r\n    keys = keys || Object.keys(customers.memory);\r\n\r\n    if(!keys.length) {\r\n\r\n        if(!element.children.length) return root.labels.no_results(element);\r\n\r\n        return element.dataset.title = '';\r\n\r\n    }\r\n\r\n    let customer = customers.memory[keys.shift()];\r\n\r\n    \r\n    if(!customer || customer.archived ||\r\n       (search && String(customer.name).toLowerCase().indexOf(search) == -1)\r\n     ) {\r\n\r\n       if(keys.length % 100 == 0) return requestAnimationFrame(()=> {\r\n\r\n         customers.render(element, search, keys, iteration);\r\n\r\n       });\r\n\r\n       return customers.render(element, search, keys, iteration);\r\n\r\n     }\r\n\r\n     requestAnimationFrame(()=> {\r\n\r\n      customers.render(element, search, keys, iteration);\r\n\r\n    });\r\n\r\n    let elem = document.createElement('div');\r\n\r\n    elem.dataset.load = 'customers.render_one';\r\n\r\n    elem.dataset.customer = customer.key;\r\n\r\n    element.appendChild(elem);\r\n\r\n  },\r\n\r\n  archive: (element) => {\r\n\r\n    let customer = customers.memory[element.dataset.key];\r\n\r\n    root.send({ request: 'archive', key: customer.key }, () => {\r\n\r\n      customers.updated = true;\r\n      \r\n    });\r\n\r\n  },\r\n\r\n  render_one: (element) => {\r\n\r\n    let customer = customers.memory[element.dataset.customer];\r\n\r\n    element.innerHTML = `\r\n      <div class=\"customer-container\">\r\n        <input placeholder=\"Naam\" data-property=\"name\" data-customer=\"${ customer.key }\" data-input=\"customers.edit\" type=\"text\" value=\"${ customer.name }\">\r\n      </div>\r\n      <div class=\"customer-container\">\r\n        <input placeholder=\"Adres\" data-property=\"address\" data-customer=\"${ customer.key }\" data-input=\"customers.edit\" type=\"text\" value=\"${ customer.address }\">\r\n      </div>\r\n      <div>\r\n        <button data-key=\"${ customer.key }\" data-click=\"customers.archive\">ARCHIVEER</button>\r\n      </div>\r\n    `;\r\n\r\n    if(!customer.name) element.querySelector('input').focus();\r\n\r\n    function format(date) {\r\n\r\n      date = new Date(date);\r\n\r\n      let months = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'];\r\n\r\n      if (!date || String(date).toLowerCase() == 'invalid date') return '';\r\n\r\n      return `\r\n        ${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}\r\n        ${ date.getHours() }:${ String(date.getMinutes()).length > 1 ? '' : 0 }${ date.getMinutes() }\r\n      `;\r\n\r\n    }\r\n\r\n  }\r\n  \r\n};\r\n\r\n(function updater(){\r\n\r\n  if(!customers.updated) return setTimeout(updater, 300);\r\n\r\n  if(root.me.launched) customers.list(document.querySelector('[data-load=\"customers.list\"]'));\r\n\r\n  customers.updated = false;\r\n\r\n  updater();\r\n\r\n}());","let tmp;\r\n\r\nlet orders = module.exports = {\r\n\r\n  add: (element) => {\r\n\r\n    root.ws.send(JSON.stringify({ request: 'new_order' }));\r\n\r\n  },\r\n  \r\n  save_search: (element) => {\r\n\r\n\tlocalStorage.setItem('search', element.value);\r\n\r\n\torders.updated = true;\r\n\r\n  },\r\n\r\n  list: (element) => {\r\n\r\n    if(!element) return;\r\n\r\n    element.innerHTML = ``;\r\n\r\n    root.labels.loading(element);\r\n\r\n    requestAnimationFrame(()=> {\r\n\r\n      let search = String(localStorage.getItem('search') || '').toLowerCase();\r\n\r\n      orders.render(element, search);\r\n\r\n    });\r\n\r\n  },\r\n\r\n\r\n  render: (element, search, keys, iteration) => {\r\n\r\n    if(!element) return;\r\n\r\n    if(!iteration) iteration = element.dataset.iteration = 'i' + Math.floor(Math.random() * 1000);\r\n\r\n    if(element.dataset.iteration != iteration) return;\r\n\r\n    keys = keys || Object.keys(orders.memory);\r\n\r\n    if(!keys.length) {\r\n\r\n        if(!element.children.length) return root.labels.no_results(element);\r\n\r\n        return element.dataset.title = '';\r\n\r\n    }\r\n\r\n    let order = orders.memory[keys.shift()];\r\n\r\n    if(!order ||\r\n       (search && String(order.customer).toLowerCase().indexOf(search) == -1)\r\n     ) {\r\n\r\n       if(keys.length % 100 == 0) return requestAnimationFrame(()=> {\r\n\r\n         orders.render(element, search, keys, iteration);\r\n\r\n       });\r\n\r\n       return orders.render(element, search, keys, iteration);\r\n\r\n     }\r\n\r\n     requestAnimationFrame(()=> {\r\n\r\n      orders.render(element, search, keys, iteration);\r\n\r\n    });\r\n\r\n    let elem = document.createElement('div');\r\n\r\n    elem.dataset.load = 'orders.render_one';\r\n\r\n    elem.dataset.order = order.key;\r\n\r\n    element.appendChild(elem);\r\n\r\n  },\r\n\r\n  save_date: (element) => {\r\n\r\n    let data = element.parentElement.dataset;\r\n\r\n    orders.edit(element.parentElement, {\r\n      value: element.parentElement.querySelector('input').value,\r\n      callback: () => {\r\n       orders.render_one(\r\n         document.querySelector(`[data-order=\"${ data.order }\"][data-load=\"orders.render_one\"]`)\r\n       );\r\n      }\r\n    });\r\n\r\n  },\r\n\r\n  edit_date: (element) => {\r\n\r\n    if(!element || element.dataset.clicked) return;\r\n\r\n    let order = orders.memory[element.dataset.order],\r\n        value = order[element.dataset.property],\r\n        date = value ? new Date(value) : new Date();\r\n\r\n    element.dataset.clicked = true;\r\n\r\n    element.innerHTML = `\r\n      <input type=\"datetime-local\" value=\"${\r\n        date.getFullYear() }-${\r\n          date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1) }-${\r\n            date.getDate() < 10 ? '0' + date.getDate() : date.getDate() }T${\r\n              date.getHours() < 10 ? '0' + date.getHours() : date.getHours() }:${\r\n              date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes() }\">\r\n      <button class=\"blue\" data-click=\"orders.save_date\">opslaan</button>\r\n    `;\r\n\r\n  },\r\n\r\n  edit: (element, options) => {\r\n\r\n    let request = {\r\n       request: 'edit',\r\n       key: element.dataset.order\r\n     };\r\n\r\n     let v = options ? options.value : element.value;\r\n\r\n     if(['arrival', 'departure'].indexOf(element.dataset.property) > -1) {\r\n\r\n       v = new Date(v).toJSON();\r\n\r\n     }\r\n\r\n     request[element.dataset.property] = v;\r\n\r\n     root.send(request, options ? options.callback : null);\r\n\r\n  },\r\n\r\n  toggle_status: (element) => {\r\n\r\n    let order = orders.memory[element.dataset.order],\r\n        index = order.tasks.indexOf(order.status);\r\n\r\n    element.dataset.index = index;\r\n\r\n    orders.toggle_task(element);\r\n\r\n  },\r\n\r\n  render_one: (element) => {\r\n\r\n    let order = orders.memory[element.dataset.order];\r\n\r\n    let tasks = root.users.memory[root.me.user].tasks.reduce((html, task, index) => {\r\n\r\n      if(task) html += `<div data-index=\"${ index }\" data-order=\"${ order.key }\" data-click=\"orders.toggle_task\" class=\"small tag${ order.tasks[index] ? ' active' : '' }\">${ task }</div>`;\r\n\r\n      return html;\r\n\r\n    }, '');\r\n\r\n    element.innerHTML = `\r\n      <div class=\"customer-container\">\r\n        <form class=\"prefiller\" data-submit=\"prefill.submit\">\r\n          <ul></ul>\r\n          <input data-property=\"customer\" data-collection=\"customers\" data-key=\"${ order.key }\" data-load=\"prefill.load\" type=\"text\">\r\n          <input type=\"submit\">\r\n        </form>\r\n      </div>\r\n      <div class=\"customer-container\">\r\n        <form class=\"prefiller\" data-submit=\"prefill.submit\">\r\n          <ul></ul>\r\n          <input data-property=\"driver\" data-collection=\"users\" data-key=\"${ order.key }\" data-load=\"prefill.load\" type=\"text\">\r\n          <input type=\"submit\">\r\n        </form>\r\n      </div>\r\n      <div class=\"task-container\">\r\n        <div data-order=\"${ order.key }\" data-click=\"orders.toggle_status\" data-index=\"${ order.tasks.indexOf(order.status) }\" class=\"tag active\">${ order.status }</div>\r\n      </div>\r\n      <div class=\"date-container\" data-property=\"arrival\" data-order=\"${ order.key }\" data-click=\"orders.edit_date\">${ format(order.arrival) }</div>\r\n      <div class=\"date-container\" data-property=\"departure\" data-order=\"${ order.key }\" data-click=\"orders.edit_date\">${ format(order.departure) }</div>\r\n      <div class=\"task-container grouped\">${ tasks }</div>\r\n      <div><input data-property=\"cargo\" data-order=\"${ order.key }\" data-input=\"orders.edit\" type=\"text\" value=\"${ order.cargo || '' }\"></div>\r\n      <div><input data-property=\"contents\" data-order=\"${ order.key }\" data-input=\"orders.edit\" type=\"text\" value=\"${ order.contents || '' }\"></div>\r\n      <div><input data-property=\"extra\" data-order=\"${ order.key }\" data-input=\"orders.edit\" type=\"text\" value=\"${ order.extra || '' }\"></div>\r\n      <div><select data-property=\"repeat\" data-order=\"${ order.key }\" data-change=\"orders.edit\">\r\n        <option${ order.repeat == '' ? ' selected' : '' } value=\"\">Niet</option>\r\n        <option${ order.repeat == 'week' ? ' selected' : '' } value=\"week\">Week</option>\r\n        <option${ order.repeat == 'month' ? ' selected' : '' } value=\"month\">Maand</option>\r\n      </select></div>\r\n    `;\r\n\r\n    if(!order.customer) element.querySelector('input').focus();\r\n\r\n    function format(date) {\r\n\r\n      date = new Date(date);\r\n\r\n      let months = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'];\r\n\r\n      if (!date || String(date).toLowerCase() == 'invalid date') return '';\r\n\r\n      return `\r\n        ${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}\r\n        ${ date.getHours() }:${ String(date.getMinutes()).length > 1 ? '' : 0 }${ date.getMinutes() }\r\n      `;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  toggle_task: (element) => {\r\n\r\n    let index = parseInt(element.dataset.index, 10),\r\n        order = orders.memory[element.dataset.order],\r\n        tasks = order.tasks.slice(),\r\n        status = 'AFGEHANDELD'\r\n\r\n     tasks[index] = tasks[index] ? '' : root.users.memory[root.me.user].tasks[index]\r\n\r\n     for(let i = 0; i < tasks.length; i++) {\r\n\r\n       if(tasks[i] == '') continue;\r\n\r\n        status = tasks[i];\r\n\r\n        break;\r\n\r\n     }\r\n\r\n     root.send({ request: 'edit', key: order.key, status: status, tasks: tasks }, () => {\r\n\r\n       orders.render_one(document.querySelector(`[data-order=\"${ order.key }\"][data-load=\"orders.render_one\"]`));\r\n       \r\n     });\r\n\r\n  },\r\n\r\n  memory: {}\r\n\r\n};\r\n\r\n(function updater(){\r\n\r\n  if(!orders.updated) return setTimeout(updater, 300);\r\n\r\n  if(root.me.launched) orders.list(document.querySelector('[data-load=\"orders.list\"]'));\r\n\r\n  orders.updated = false;\r\n\r\n  updater();\r\n\r\n}());","module.exports = {\r\n\r\n  memory: {},\r\n  \r\n  load: function load(){\r\n\r\n    root.main = document.querySelector('main');\r\n\r\n    if(!root.main) return setTimeout(load, 0);\r\n\r\n  },\r\n\r\n  sign_in: (element) => {\r\n\r\n    root.send({\r\n      request: 'sign_in',\r\n      email: element.parentElement.querySelector('[type=\"email\"]').value || '',\r\n      password: element.parentElement.querySelector('[type=\"password\"]').value || '',\r\n    });\r\n  \t\r\n  },\r\n\r\n  sign_out: (element) => {\r\n\r\n    root.ws.send(JSON.stringify({ request: 'sign_out' }));\r\n\r\n  },\r\n\r\n  check_passwords: (element) => {\r\n\r\n    let inputs = root.main.querySelectorAll('input[type=\"password\"]');\r\n\r\n    if(!inputs[0].value && !inputs[2].value) return root.sessions.launch();\r\n\r\n    if(inputs[0].value != inputs[1].value) return alert('not equal');\r\n\r\n    root.send({\r\n      request: 'set_password',\r\n      old_password: inputs[0].value,\r\n      password: inputs[2].value || ''\r\n    }, (res) => {\r\n\r\n      root.sessions.launch();\r\n\r\n    });\r\n\r\n  },\r\n\r\n  launch: () => {\r\n\r\n    root.send({ request: 'launch' });\r\n\r\n  },\r\n  \r\n  load_page: (elem, options) => {\r\n\r\n    if(!root.main) return setTimeout(root.main, 0, elem, options);\r\n\r\n    let page = elem ? elem.dataset.page : history.state ? history.state.page : 'landing';\r\n\r\n    if(!localStorage.getItem('authenticated') && ['landing', 'login', 'about'].indexOf(page) == -1) {\r\n      page = 'landing';\r\n    }\r\n\r\n    document.body.classList.forEach((c) => {\r\n\r\n      if(c.indexOf('-page') == -1) return;\r\n\r\n      document.body.classList.remove(c);\r\n\r\n    });\r\n\r\n    document.body.classList.remove('notified');\r\n\r\n    document.body.classList.add(page + '-page');\r\n    \r\n    root.main.dataset.load = page + '.html';\r\n\r\n    if(!options || !options.prevent_url) root.sessions.url('/' + page);\r\n\r\n    window.scrollTo(0, 0);\r\n\r\n  },\r\n\r\n  url: (state, options) => {\r\n\r\n    let defaulted = 'landing';\r\n\r\n    let operation = options && options.replace ? 'replaceState' : 'pushState';\r\n\r\n    let url = typeof state == 'string' ? decode() : location.pathname;\r\n\r\n    return history[operation](state ? state : decode(), options ? options.title : document.title, state ? encode() : pathname);\r\n\r\n    function encode() {\r\n\r\n      let page = state ? state.page || defaulted : defaulted;\r\n\r\n      return Object.keys(state).reduce((url,key)=>{\r\n\r\n        if (key == 'page') return url;\r\n\r\n        return `${url}/${key}/${ state[key] }`;\r\n\r\n      }\r\n      , `/${ page == defaulted ? '' : page }`);\r\n\r\n    }\r\n\r\n    function decode() {\r\n\r\n      let parts = (state || location.pathname).split(/\\//g);\r\n\r\n      state = {};\r\n\r\n      for (let i = 0; i < parts.length; i += 2) {\r\n\r\n        state[parts[i] || 'page'] = parts[i + 1];\r\n\r\n      }\r\n\r\n      state.page = state.page || 'landing';\r\n      \r\n      return state;\r\n\r\n    }\r\n\r\n  }\r\n\r\n};","module.exports = {\r\n\r\n  change_language: (element) => {\r\n\r\n\tlocalStorage.setItem('language', element.dataset.language);\r\n\r\n\tlocation.reload();\r\n\r\n  },\r\n\r\n  highlight_lang: (element) => {\r\n\r\n  \tif(!element.classList.contains(localStorage.getItem('language') || 'nl')) return;\r\n\r\n  \telement.classList.add('active');\r\n  \t\r\n  },\r\n\r\n  format_date: (element) => {\r\n\r\n  \tlet date = new Date(element.dataset.date),\r\n\t\tmonths = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'];\r\n\r\n\tif (!date || String(date).toLowerCase() == 'invalid date') return;\r\n\r\n\telement.innerHTML = `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;\r\n\r\n  },\r\n\r\n  format_time: (element) => {\r\n\r\n  \tlet date = new Date(element.dataset.date);\r\n\r\n\tif (!date || String(date).toLowerCase() == 'invalid date') return;\r\n\r\n  \telement.innerHTML = `${ date.getHours() }:${ String(date.getMinutes()).length > 1 ? '' : 0 }${ date.getMinutes() }`;\r\n\r\n  },\r\n\r\n  start: (element) => {\r\n\r\n\tconsole.log('e', element);\r\n  \t\r\n  },\r\n\r\n  hide_notification: (element) => {\r\n  \t\r\n  \tdocument.querySelector('body').classList.remove('notified');\r\n\r\n  }\r\n\r\n};","let users = module.exports = {\r\n\r\n  memory: {},\r\n\r\n  add: (element) => {\r\n\r\n    root.ws.send(JSON.stringify({ request: 'new_user' }));\r\n\r\n  },\r\n  \r\n  load_permissions: (element) => {\r\n\r\n    element.innerHTML = `\r\n      <label class=\"dark-grey\" data-load=\"labels.permissions\"></label><br>\r\n\r\n      <div class=\"row\">\r\n        <input id=\"add\" data-load=\"users.load_permission\" data-change=\"users.update_permission\" type=\"checkbox\">\r\n        <label for=\"add\" class=\"task fa fa-user-plus\"></label>\r\n        <input disabled type=\"text\" value=\"ADMIN\">\r\n      </div>\r\n\r\n     ${ users.render_tasks() }\r\n      `;\r\n    \r\n  },\r\n\r\n  render_tasks: () => {\r\n\r\n    let user = users.memory[root.me.user];\r\n\r\n    return user.tasks.reduce((memo, task, index) => {\r\n\r\n      memo += `\r\n      <div class=\"row\">\r\n        ${ task ? `<input id=\"task-${ index }\" data-load=\"users.load_permission\" data-change=\"users.update_permission\" type=\"checkbox\">` : '' }\r\n        <label for=\"task-${ index + 1 }\" class=\"task task-${ index + 1 }\">${ index + 1 }</label>\r\n        <input placeholder=\"NIEUW\" data-index=\"${ index }\" data-input=\"users.update_task\" type=\"text\" value=\"${ task }\">\r\n      </div>`;\r\n\r\n      return memo;\r\n\r\n    }, '');\r\n\r\n  },\r\n\r\n  load_permission: (input) => {\r\n\r\n    if(\r\n    (input.id == 'add' && root.me.add_permission) ||\r\n    (input.id == 'archive' && root.me.archive_permission) ||\r\n    root.me.tasks[parseInt(input.id.replace('task-', ''), 10)]\r\n    ) input.setAttribute('checked', true);\r\n\r\n  },\r\n\r\n  update_permission: (input) => {\r\n\r\n    if(input.id == 'add') return root.send({ request: 'update_permission', add_permission: input.checked });\r\n\r\n    if(input.id == 'archive') return root.send({ request: 'update_permission', archive_permission: input.checked });\r\n\r\n    let tasks = users.memory[root.me.user].tasks.map((task, index) => {\r\n\r\n      if(index == parseInt(input.id.replace('task-', ''), 10)) return input.checked ? task : '';\r\n\r\n      return root.me.tasks[index] ? task : '';\r\n\r\n    });\r\n\r\n    tasks.pop();\r\n\r\n    root.send({ request: 'update_permission', tasks: tasks });\r\n\r\n  },\r\n\r\n  update_task: (element) => {\r\n\r\n   let index = element.dataset.index,\r\n       tasks = users.memory.users_admin.tasks.slice();\r\n\r\n    tasks[parseInt(element.dataset.index, 10)] = element.value;\r\n\r\n    let update = tasks.reduce((memo, task) => {\r\n\r\n      if(!task) return memo;\r\n\r\n      memo.push(String(task).toUpperCase());\r\n\r\n      return memo;\r\n\r\n    }, []);\r\n\r\n    update.push('');\r\n\r\n    root.send({ request: 'update_tasks', tasks: update }, (user) => {\r\n\r\n      if(tasks.length == update.length) return;\r\n      \r\n      let elem = document.querySelector('[data-load=\"users.load_permissions\"]');\r\n\r\n      users.load_permissions(elem);\r\n\r\n        let input = document.querySelector(`[data-index=\"${ index }\"]`)\r\n\r\n        input.focus();\r\n        \r\n        input.selectionStart = input.selectionEnd = input.value.length;\r\n\r\n    });\r\n\r\n  },\r\n\r\n  save_email: (input) => {\r\n\r\n    localStorage.setItem('remember_email', input.value);\r\n\r\n  },\r\n\r\n  load_email: (input) => {\r\n\r\n    input.value = localStorage.getItem('remember_email') || '';\r\n\r\n    input.focus();\r\n\r\n  },\r\n\r\n\r\n  list: (element) => {\r\n\r\n    if(!element) return;\r\n\r\n    element.innerHTML = ``;\r\n\r\n    root.labels.loading(element);\r\n\r\n    requestAnimationFrame(()=> {\r\n\r\n      let search = String(localStorage.getItem('search') || '').toLowerCase();\r\n\r\n      users.render(element, search);\r\n\r\n    });\r\n\r\n  },\r\n\r\n\r\n  render: (element, search, keys, iteration) => {\r\n\r\n    if(!element) return;\r\n\r\n    if(!iteration) iteration = element.dataset.iteration = 'i' + Math.floor(Math.random() * 1000);\r\n\r\n    if(element.dataset.iteration != iteration) return;\r\n\r\n    keys = keys || Object.keys(users.memory);\r\n\r\n    if(!keys.length) {\r\n\r\n        if(!element.children.length) return root.labels.no_results(element);\r\n\r\n        return element.dataset.title = '';\r\n\r\n    }\r\n\r\n    let user = users.memory[keys.shift()];\r\n\r\n    if(!user || user.archived ||\r\n       (search && String(user.name).toLowerCase().indexOf(search) == -1)\r\n     ) {\r\n\r\n       if(keys.length % 100 == 0) return requestAnimationFrame(()=> {\r\n\r\n         users.render(element, search, keys, iteration);\r\n\r\n       });\r\n\r\n       return users.render(element, search, keys, iteration);\r\n\r\n     }\r\n\r\n     requestAnimationFrame(()=> {\r\n\r\n      users.render(element, search, keys, iteration);\r\n\r\n    });\r\n\r\n    let elem = document.createElement('div');\r\n\r\n    elem.dataset.load = 'users.render_one';\r\n\r\n    elem.dataset.user = user.key;\r\n\r\n    element.appendChild(elem);\r\n\r\n  },\r\n\r\n  edit: (element, options) => {\r\n\r\n    let request = {\r\n       request: 'edit',\r\n       key: element.dataset.user\r\n     };\r\n\r\n     let v = options ? options.value : element.value;\r\n\r\n     request[element.dataset.property] = v;\r\n\r\n     root.send(request, options ? options.callback : null);\r\n\r\n  },\r\n  \r\n  archive: (element) => {\r\n\r\n    let user = users.memory[element.dataset.key];\r\n\r\n    root.send({ request: 'archive', key: user.key }, () => {\r\n\r\n      users.updated = true;\r\n      \r\n    });\r\n\r\n  },\r\n\r\n  render_one: (element) => {\r\n\r\n    let user = users.memory[element.dataset.user];\r\n\r\n    let tasks = users.memory[root.me.user].tasks.reduce((html, task, index) => {\r\n\r\n      if(task) html += `<div data-index=\"${ index }\" data-user=\"${ user.key }\" data-click=\"users.toggle_task\" class=\"small\">${ task }</div>`;\r\n\r\n      return html;\r\n\r\n    }, '');\r\n\r\n    element.innerHTML = `\r\n      <div>\r\n        <input placeholder=\"Name\" data-property=\"name\" data-user=\"${ user.key }\" data-input=\"users.edit\" type=\"text\" value=\"${ user.name || '' }\">\r\n      </div>\r\n      <div>\r\n        <input placeholder=\"example@email.com\" data-property=\"email\" data-user=\"${ user.key }\" data-input=\"users.edit\" type=\"text\" value=\"${ user.email || '' }\">\r\n      </div>\r\n      <div>\r\n        <input placeholder=\"Password\" data-property=\"password\" data-user=\"${ user.key }\" data-input=\"users.edit\" type=\"password\">\r\n      </div>\r\n      <div>\r\n        <select data-property=\"role\" value=\"${ user.role }\" data-user=\"${ user.key }\" data-change=\"users.edit\">\r\n          <option${ user.role == 'intern' ? ' selected' : '' } value=\"intern\">Intern</option>\r\n          <option${ user.role == 'driver' ? ' selected' : '' } value=\"driver\">Chauffeur</option>\r\n          <option${ user.role == 'admin' ? ' selected' : '' } value=\"admin\">Admin</option>\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <button data-click=\"users.archive\" data-key=\"${ user.key }\">ARCHIVEER</button>\r\n      </div>\r\n    `;\r\n\r\n    if(!user.name) element.querySelector('input').focus();\r\n\r\n    function format(date) {\r\n\r\n      date = new Date(date);\r\n\r\n      let months = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'];\r\n\r\n      if (!date || String(date).toLowerCase() == 'invalid date') return '';\r\n\r\n      return `\r\n        ${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}\r\n        ${ date.getHours() }:${ String(date.getMinutes()).length > 1 ? '' : 0 }${ date.getMinutes() }\r\n      `;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  save_search: (element) => {\r\n\r\n\tlocalStorage.setItem('search', element.value);\r\n\r\n\tusers.updated = true;\r\n\r\n  }\r\n\r\n  \r\n};\r\n\r\n(function updater(){\r\n\r\n  if(!users.updated) return setTimeout(updater, 300);\r\n\r\n  if(root.me.launched) users.list(document.querySelector('[data-load=\"users.list\"]'));\r\n\r\n  users.updated = false;\r\n\r\n  updater();\r\n\r\n}());","const LANGS = ['nl', 'en'];\r\n\r\nlet index = LANGS.indexOf(localStorage.getItem('language'));\r\n\r\nif(index == -1) index = 0;\r\n\r\nlet labels = {\r\n  landing: ['Welkom', 'Landing'],\r\n  add: ['Toevoegen', 'Add'],\r\n  about: ['Over Ons', 'About'],\r\n  sign_in: ['Inloggen', 'Sign in'],\r\n  sign_out: ['Uitloggen', 'Sign out'],\r\n  courses: ['Cursussen', 'Courses'],\r\n  profile: ['Profiel', 'Profile'],\r\n  invitations: ['Uitnodigingen', 'Invitations'],\r\n  stats: ['Statistieken', 'Statistics'],\r\n  no_results: [\r\n    title('Geen resultaten'),\r\n    title('No results')\r\n  ],\r\n  loading: [\r\n    title('Laden...'),\r\n    title('Loading...')\r\n  ],\r\n  placeholder_search: [placeholder('zoeken'), placeholder('search')],\r\n  password: ['WACHTWOORD', 'PASSWORD'],\r\n  permissions: ['PERMISSIES', 'PERMISSIONS'],\r\n  configure_ipad: ['CONFIGUREER DEZE IPAD', 'CONFIGURE THIS IPAD'],\r\n  save: ['START DE APP', 'LAUNCH THE APP'],\r\n  password: ['WACHTWOORD', 'PASSWORD'],\r\n  edit_password: ['WACHTWOORD WIJZIGEN', 'CHANGE PASSWORD'],\r\n  old_password: [placeholder('oud wachtwoord'), placeholder('old password')],\r\n  new_password: [placeholder('nieuw wachtwoord'), placeholder('new password')]\r\n};\r\n\r\nfor(let n in labels) {\r\n\r\n  if(!labels.hasOwnProperty(n)) continue;\r\n\r\n  if(labels[n] == false) labels[n] = n;\r\n\r\n  else labels[n] = labels[n][index];\r\n\r\n}\r\n\r\nmodule.exports = labels;\r\n\r\nfunction placeholder(label){\r\n\r\n  return (el) => el.setAttribute('placeholder', label);\r\n\r\n}\r\n\r\nfunction title(label){\r\n\r\n  return (el) => el.setAttribute('data-title', label);\r\n\r\n}","let prefill = module.exports = {\r\n\r\n  memory: {},\r\n\r\n  load: (element) => {\r\n\r\n    element.dataset.input = 'prefill.edit';\r\n\r\n    if(!element.dataset.key) return;\r\n\r\n    let key = element.dataset.key,\r\n        collection = key.split('_')[0],\r\n        item = root[collection].memory[key];\r\n\r\n    if(!item[element.dataset.property]) return;\r\n\r\n    let property_key = item[element.dataset.property],\r\n        property_collection = property_key.split('_')[0];\r\n\r\n    if(!root[property_collection]) return;\r\n\r\n    let property = root[property_collection].memory[property_key];\r\n\r\n    element.value = property.name;\r\n\r\n  },\r\n\r\n  select: (element) => {\r\n\r\n    let key = element.dataset.key,\r\n        collection = key.split('_')[0],\r\n        item = root[collection].memory[key];\r\n    \r\n    let input = element.parentElement.parentElement.querySelector('input');\r\n\r\n    input.value = item.name;\r\n\r\n    let input_collection = input.dataset.key.split('_')[0];\r\n\r\n    element.parentElement.innerHTML = '';\r\n\r\n    let request = {\r\n       request: 'edit',\r\n       key: input.dataset.key\r\n     };\r\n\r\n     request[input.dataset.property] = item.key;\r\n\r\n     root.send(request);\r\n\r\n  },\r\n\r\n  submit: (element) => {\r\n\r\n    let selection = element.querySelector('li');\r\n\r\n    if(selection) prefill.select(selection);\r\n\r\n  },\r\n\r\n  edit: function search(element, keys) {\r\n\r\n    let ul = element.parentElement.querySelector('ul');\r\n\r\n    if(!keys) ul.innerHTML = '';\r\n\r\n    keys = keys || Object.keys(root[element.dataset.collection].memory);\r\n\r\n    if(prefill.loop && prefill.loop > keys.length) return; // new loop started, this one stops\r\n\r\n    prefill.loop = keys.length - 1;\r\n\r\n    if(!keys.length || !element.value) return; // done looping\r\n\r\n    let key = keys.shift(),\r\n        collection = key.split('_')[0],\r\n        item = root[collection].memory[key];\r\n\r\n    if(String(item.name || '').toLowerCase().indexOf(String(element.value).toLowerCase()) == -1)\r\n      return search(element, keys);\r\n\r\n    requestAnimationFrame(()=>search(element, keys));\r\n\r\n    ul.innerHTML += `<li data-click=\"prefill.select\" data-key=\"${ item.key }\">${ item.name }</li>`\r\n\r\n  }\r\n\r\n};","let updates = [];\r\n\r\nmodule.exports = init;\r\n\r\nfunction init() {\r\n\r\n  bind();\r\n\r\n  document.documentElement.addEventListener('click', listener);\r\n\r\n  document.documentElement.addEventListener('change', listener);\r\n\r\n  document.documentElement.addEventListener('input', listener);\r\n\r\n  document.documentElement.addEventListener('submit', listener);\r\n\r\n}\r\n\r\nfunction listener(e, element) {\r\n\r\n  element = element || e.target;\r\n\r\n  if(e.type.toLowerCase() == 'submit') e.preventDefault();\r\n\r\n  if (!element.dataset || !element.dataset[e.type]) {\r\n\r\n    if(!element.parentElement) return;\r\n\r\n    return listener(e, element.parentElement);\r\n\r\n  }\r\n\r\n  let target = root;\r\n\r\n  for (let i = 0, parts = element.dataset[e.type].split('.'); i < parts.length; i++) {\r\n\r\n    if (!target) return console.error(element.dataset[e.type] || e.type, 'does not exist');\r\n\r\n    target = target[parts[i]];\r\n\r\n  }\r\n\r\n  if(typeof target != 'function') return console.error(element.dataset[e.type] || e.type, 'does not exist');\r\n\r\n  target(element);\r\n\r\n}\r\n\r\nfunction bind() {\r\n\r\n  (function loop(){\r\n\r\n    if(!updates.length) return requestAnimationFrame(loop);\r\n\r\n    let elements = updates.splice(0, updates.length);\r\n\r\n    for(let i = 0; i < elements.length; i++) {\r\n\r\n      [].map.call(elements[i].querySelectorAll('[data-bind], [data-load]'), bind_one);\r\n\r\n    }\r\n\r\n    requestAnimationFrame(loop);\r\n\r\n  }());\r\n\r\n  new MutationObserver(observer).observe(\r\n    document.documentElement,\r\n    {\r\n      attributes: true,\r\n      subtree: true,\r\n      childList: true,\r\n      characterData: true\r\n    }\r\n  );\r\n\r\n}\r\n\r\nfunction observer(mutations) {\r\n\r\n  for(let i = 0; i < mutations.length; i++) {\r\n\r\n    if(mutations[i].type == 'attributes') {\r\n\r\n       if(mutations[i].attributeName == 'data-load') load(mutations[i].target);\r\n\r\n       continue;\r\n\r\n    }\r\n\r\n    if(mutations[i].type != 'childList') return;\r\n\r\n    if(updates.indexOf(mutations[i].target) == -1) updates.push(mutations[i].target);\r\n\r\n  }\r\n\r\n}\r\n\r\nfunction bind_one(element) {\r\n\r\n  let d = element.dataset,\r\n      key = d.bind == 'me' ? root.config.user : d.bind,\r\n      collection;\r\n\r\n  if(d.load) return load(element);\r\n\r\n  if(!key) return collection.error(d);\r\n\r\n  collection = root[key.split('_').slice(0, -1).join('_')];\r\n\r\n  if (!collection || !collection.memory[key]) return console.error(key);\r\n\r\n  let prop = d.value || d.text || d.bg || d.html,\r\n      obj = collection.memory[key];\r\n\r\n  if(d.value) element.value = obj[d.value] || '';\r\n\r\n  if(d.html) element.innerHTML = obj[d.html] || '';\r\n\r\n  if(d.text) element.innerHTML = (obj[d.text] || '').replace(/(>|<)/g, escape);\r\n\r\n  if(d.bg) element.style.backgroundImage = `url(\"${ obj[d.bg] || '' }`;\r\n\r\n}\r\n\r\nfunction load(element) {\r\n\r\n  let target = root;\r\n\r\n  for (let i = 0, parts = element.dataset.load.split('.'); i < parts.length; i++) {\r\n\r\n    target = target[parts[i]];\r\n\r\n    if (!target) {\r\n\r\n      if(element.dataset.load.indexOf('.html') != -1) return load_file(element);\r\n\r\n      return console.error(element.dataset.load, 'does not exist');\r\n\r\n    }\r\n\r\n  }\r\n\r\n  if(element.dataset.load.substring(0, 11) == 'labels.user') {\r\n\r\n    let user = root.users.memory[root.config.user],\r\n        str = element.dataset.load;\r\n    \r\n    str = str.substring(12);\r\n\r\n    if(user && typeof(str) == 'string' && user[str]) return element.value = user[str];\r\n\r\n  }\r\n\r\n  if(typeof target == 'string') return element.innerHTML = target;\r\n\r\n  if(typeof target == 'function') return target(element);\r\n\r\n}\r\n\r\nfunction load_file(element) {\r\n\r\n  let xhr = new XMLHttpRequest();\r\n\r\n  xhr.open('GET', element.dataset.load, true);\r\n\r\n  xhr.onreadystatechange = function(e) {\r\n\r\n    if (this.readyState != 4 || this.status != 200) return;\r\n\r\n    root.templates = root.templates || {};\r\n\r\n    let target = root.templates;\r\n\r\n    for (let i = 0, parts = element.dataset.load.split('.'); i + 1 < parts.length; i++) {\r\n\r\n      if (!target) return;\r\n\r\n      target[parts[i]] = target[parts[i]] || {};\r\n\r\n      target = target[parts[i]];\r\n\r\n    }\r\n\r\n    element.innerHTML = target.html = this.responseText;\r\n\r\n  }\r\n\r\n  xhr.send();\r\n\r\n\r\n}\r\n\r\nfunction escape(match) {\r\n\r\n  return match == '>' ? '&gt;' : '&lt;';\r\n\r\n}","if (!Object.assign) {\r\n  Object.defineProperty(Object, 'assign', {\r\n    enumerable: false,\r\n    configurable: true,\r\n    writable: true,\r\n    value: function(target) {\r\n      'use strict';\r\n      if (target === undefined || target === null) {\r\n        throw new TypeError('Cannot convert first argument to object');\r\n      }\r\n\r\n      var to = Object(target);\r\n      for (var i = 1; i < arguments.length; i++) {\r\n        var nextSource = arguments[i];\r\n        if (nextSource === undefined || nextSource === null) {\r\n          continue;\r\n        }\r\n        nextSource = Object(nextSource);\r\n\r\n        var keysArray = Object.keys(Object(nextSource));\r\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n          var nextKey = keysArray[nextIndex];\r\n          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\r\n          if (desc !== undefined && desc.enumerable) {\r\n            to[nextKey] = nextSource[nextKey];\r\n          }\r\n        }\r\n      }\r\n      return to;\r\n    }\r\n  });\r\n}\r\n\r\n(function () {\r\n\r\n  if (typeof window.Element === \"undefined\" || \"classList\" in document.documentElement) return;\r\n\r\n  var prototype = Array.prototype,\r\n      push = prototype.push,\r\n      splice = prototype.splice,\r\n      join = prototype.join;\r\n\r\n  function DOMTokenList(el) {\r\n    this.el = el;\r\n    // The className needs to be trimmed and split on whitespace\r\n    // to retrieve a list of classes.\r\n    var classes = el.className.replace(/^\\s+|\\s+$/g,'').split(/\\s+/);\r\n    for (var i = 0; i < classes.length; i++) {\r\n      push.call(this, classes[i]);\r\n    }\r\n  };\r\n\r\n  DOMTokenList.prototype = {\r\n    add: function(token) {\r\n      if(this.contains(token)) return;\r\n      push.call(this, token);\r\n      this.el.className = this.toString();\r\n    },\r\n    contains: function(token) {\r\n      return this.el.className.indexOf(token) != -1;\r\n    },\r\n    item: function(index) {\r\n      return this[index] || null;\r\n    },\r\n    remove: function(token) {\r\n      if (!this.contains(token)) return;\r\n      for (var i = 0; i < this.length; i++) {\r\n        if (this[i] == token) break;\r\n      }\r\n      splice.call(this, i, 1);\r\n      this.el.className = this.toString();\r\n    },\r\n    toString: function() {\r\n      return join.call(this, ' ');\r\n    },\r\n    toggle: function(token) {\r\n      if (!this.contains(token)) {\r\n        this.add(token);\r\n      } else {\r\n        this.remove(token);\r\n      }\r\n\r\n      return this.contains(token);\r\n    }\r\n  };\r\n\r\n  window.DOMTokenList = DOMTokenList;\r\n\r\n  function defineElementGetter (obj, prop, getter) {\r\n      if (Object.defineProperty) {\r\n          Object.defineProperty(obj, prop,{\r\n              get : getter\r\n          });\r\n      } else {\r\n          obj.__defineGetter__(prop, getter);\r\n      }\r\n  }\r\n\r\n  defineElementGetter(Element.prototype, 'classList', function () {\r\n    return new DOMTokenList(this);\r\n  });\r\n\r\n})();\r\n\r\n","require('./polyfill.js');\r\n\r\nconst DEV_MODE = true;\r\n\r\nwindow.root = {\r\n\r\n  config: init(),\r\n\r\n  incoming: incoming,\r\n  \r\n  templates: require('./collections/templates.js'),\r\n  \r\n  customers: require('./collections/customers.js'),\r\n\r\n  sessions: require('./collections/sessions.js'),\r\n\r\n  labels: require('./components/labels.js'),\r\n  \r\n  prefill: require('./components/prefill.js'),\r\n\r\n  orders: require('./collections/orders.js'),\r\n\r\n  users: require('./collections/users.js')\r\n\r\n};\r\n\r\nfunction init(){\r\n\r\n  require('./listeners.js')();\r\n\r\n  requestAnimationFrame(()=> {\r\n\r\n\troot.sessions.load();\r\n\r\n\tcreate_websocket();\r\n\r\n  });\r\n\r\n  return {\r\n    user: '',\r\n    session: '',\r\n    error: error,\r\n    query: location.search.slice(1).split('&').reduce((memo, pair) => {\r\n\r\n\t  let p = pair.split('=');\r\n\r\n\t  memo[p[0]] = p[1];\r\n\r\n\t  return memo;\r\n\r\n\t}, {})\r\n  };\r\n\r\n}\r\n\r\nfunction create_websocket() {\r\n\r\n  let query = '',\r\n      callbacks = [];\r\n\r\n  for(let i in localStorage)\r\n    query += (query ? '&' : '?') + encodeURIComponent(i) + '=' +  encodeURIComponent(localStorage.getItem(i));\r\n\r\n  new WebSocket(DEV_MODE ?\r\n    `ws://localhost:443/${ query }` :\r\n    `wss://tsr.fearless-apps.com/${ query }`\r\n  ).addEventListener('message', function listener(e){\r\n\r\n    root.ws = e.target;\r\n\r\n    root.send = Send(e.target, callbacks);\r\n\r\n    incoming(JSON.parse(e.data), callbacks);\r\n\r\n    root.ws.removeEventListener('message', listener);\r\n\r\n    root.ws.addEventListener('message', (e) => incoming(JSON.parse(e.data), callbacks));\r\n\r\n  });\r\n\r\n}\r\n\r\nfunction error(element) {\r\n\r\n  if(element && element.dataset) return console.error(element.dataset.message);\r\n  \r\n  console.error(arguments);\r\n\r\n}\r\n\r\nfunction Send(ws, callbacks) {\r\n\r\n  return function send(data, callback) {\r\n\r\n    let cb = `cb_${ Math.floor(Math.random() * 10000) }`;\r\n\r\n    data.callback = cb;\r\n\r\n    callbacks[cb] = callback;\r\n\r\n    ws.send(JSON.stringify(data));\r\n\r\n  };\r\n\r\n}\r\n\r\nfunction incoming(message, callbacks){\r\n\r\n  if(message instanceof Array) {\r\n\r\n\tif(Object.keys(root.orders.memory).length) root.updated = true;\r\n\r\n  \tfor(let m in message) merge(message[m]);\r\n\r\n\treturn;\r\n\r\n  }\r\n\r\n  merge(message);\r\n  \r\n  if(message.error) notify(message);\r\n\r\n  if(message.redirect) location.href = message.redirect;\r\n\r\n  if(message.callback && callbacks[message.callback]) {\r\n\r\n  \tcallbacks[message.callback](message);\r\n\r\n  \tdelete callbacks[message.callback];\r\n  \t\r\n  }\r\n\r\n  if(typeof message.token == 'undefined') return;\r\n\r\n  root.me = Object.assign(root.me || {}, message);\r\n\r\n  document.body.classList[message.token ? 'add' : 'remove']('authenticated');\r\n\r\n  if(!message.token) root.sessions.url('/');\r\n\r\n  else if(localStorage.getItem('authenticated') && !message.launched) root.sessions.url('/');\r\n\r\n  else if(history.state && history.state.page == 'admin') root.sessions.url('/');\r\n\r\n  localStorage.setItem('authenticated', message.token || '');\r\n\r\n  root.sessions.load_page(null, { prevent_url: true });\r\n  \r\n}\r\n\r\nfunction notify(message) {\r\n\r\n  \tdocument.body.classList.add('notified');\r\n\r\n\tdocument.querySelector('#notification-message').innerHTML = message.error;\r\n\t\r\n}\r\n\r\nfunction merge(message){\r\n\r\n  if(!message.key) return;\r\n\r\n  let collection = message.key.split('_').slice(0, -1).join('_');\r\n\r\n  if(!root[collection].memory[message.key]) {\r\n\r\n  \troot[collection].memory[message.key] = message;\r\n\r\n  \treturn root[collection].updated = true;\r\n\r\n  }\r\n  \r\n  root[collection].memory[message.key] = Object.assign(root[collection].memory[message.key] || {}, message);\r\n  \r\n}","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}